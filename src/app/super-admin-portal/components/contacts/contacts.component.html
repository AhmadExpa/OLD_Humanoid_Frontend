

<div class="container-fluid mt-5">
  <div class="row">
      <div class="col-md-12 mb-3">
          <p-table [columns]="selectedColumns" #dt [value]="getCompliancePackData" dataKey="id" [rowHover]="true"
          [reorderableColumns]="true"
              [rows]="10" editMode="row" [showCurrentPageReport]="true" [rowsPerPageOptions]="[4, 25, 50]"
              [paginator]="true" [resizableColumns]="true" [totalRecords]="getCompliancePackData.length"
              currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
              styleClass="p-datatable-gridlines"
              [globalFilterFields]="['clientName', 'campaign', 'email', 'status','platform']">
              <ng-template pTemplate="caption">

                  <div class="table-header">
                      <span class="me-5"> List of Leads</span>
                      <!-- Multi-Select -->
                      <p-multiSelect [options]="cols" [(ngModel)]="selectedColumns" optionLabel="header"
                          selectedItemsLabel="{0} columns selected" [style]="{'min-width': '200px'}"
                          placeholder="Choose Columns"></p-multiSelect>
                      <!-- Multi-Select -->
                      <span class="p-input-icon-left ms-3">
                          <i class="pi pi-search"></i>
                          <input pInputText type="text"
                              (input)="dt.filterGlobal($any($event.target).value, 'contains')"
                              placeholder="Global Search" />
                      </span>

                  </div>
              </ng-template>
              <ng-template pTemplate="header" let-columns>
                  <tr>
               
                      <th *ngFor="let col of columns" pResizableColumn pReorderableColumn>
                          {{col.header}}
                          <p-columnFilter type="text" [field]="col.field" display="menu"></p-columnFilter>
                      </th>
                      <th pResizableColumn>
                          <span>Perform-Actions</span>
                      </th>

                  </tr>

                  <tr>
                    
                      <th *ngFor="let col of columns">
                          <input pInputText type="text"
                              (input)="dt.filter($any($event.target).value, col.field, 'contains')"
                              [value]="$any(dt.filters[col.field])?.value || ''"
                              [placeholder]="'Search by ' + col.header" class="w-full">
                      </th>
                   
                      <th>
                          <span>Perform-Actions</span>
                      </th>
                  </tr>
                  <tr>

                  </tr>

              </ng-template>

              <ng-template pTemplate="body" let-getCompliancePackData let-columns="columns" let-editing="editing"
                  let-ri="rowIndex">
                  <tr [pEditableRow]="getCompliancePackData">
                      <td *ngFor="let col of columns">
                          <p-cellEditor>

                              <ng-template pTemplate="input">
                                  <ng-container
                                      *ngIf="col.field === 'status'  ">
                                      <p-dropdown [options]="getOptions(col.field)"
                                          [(ngModel)]="getCompliancePackData[col.field]" [editable]="false"
                                          appendTo="body"></p-dropdown>
                                  </ng-container>
                                  <ng-container
                                      *ngIf="col.field !== 'status' ">
                                      <input pInputText type="text" [(ngModel)]="getCompliancePackData[col.field]">
                                  </ng-container>
                              </ng-template>
                              <ng-template pTemplate="output">
                                  <ng-container *ngIf="col.header === 'Status'">
                                      <p-tag [value]="getCompliancePackData[col.field]"
                                          [severity]="getSeverity(getCompliancePackData[col.field])"></p-tag>
                                  </ng-container>
                                  
                                  <ng-container *ngIf="col.header !== 'Status' ">
                                      {{ getCompliancePackData[col.field] }}
                                  </ng-container>
                              </ng-template>
                          </p-cellEditor>
                      </td>
                      <td style="text-align:center">
                          <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil"
                              class="p-button-success me-1"
                              (click)="onRowEditInit(getCompliancePackData, ri)"></button>

                          <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check"
                              (click)="onRowEditSave(getCompliancePackData, ri)" class="p-button-success"
                              class="me-2"></button>
                          <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
                              (click)="onRowEditCancel(getCompliancePackData, ri)"
                              class="p-button-danger me-2"></button>
                          <p-button icon="pi pi-trash" styleClass="p-button-danger" class="me-1"
                              data-bs-toggle="modal"
                              (click)="activeModal({_id:getCompliancePackData?._id,modal:'hard'})"
                              data-bs-target="#exampleModal1"></p-button>
                          <p-button icon="pi pi-trash" styleClass="p-button-warning" data-bs-toggle="modal"
                              (click)="activeModal({_id:getCompliancePackData?._id,modal:'soft'})"
                              data-bs-target="#exampleModal1"></p-button>
                      </td>
                  </tr>


              </ng-template>
          </p-table>
      </div>
  </div>
</div>

<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">{{activeSoftDeleteModal ? 'Archived' :
                  activeHardDeleteModal ? 'Delete' : ''}}</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" data-bs-dismiss="modal" class="btn"
                  [ngClass]=" activeSoftDeleteModal ? 'btn-outline-success' : activeHardDeleteModal ? 'btn-outline-danger' : '' "
                  (click)="activeSoftDeleteModal ? softDeleteIdFromRegistrationThroughEmailForm(FromRegistrationThroughEmailId) : activeHardDeleteModal ? deleteIdDataFromRegistrationThroughEmailForm(FromRegistrationThroughEmailId) : null">Are
                  you sure you want to {{activeSoftDeleteModal ? 'Archived' : activeHardDeleteModal ? 'Delete' : ''}}
                  it?</button>
          </div>
      </div>
  </div>
</div>
<!-- Confirmation Modal -->